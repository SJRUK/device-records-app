<h1>Search Database</h1>

    <div>
      <h2>Search Devices</h2>
      <p>Search the database using the Asset Number</p>
      <input type="text" placeholder="Asset Number" id="searchInput">  
      <button id="search-button">Search</button>
        
    </div>

    <div id="resultsContainer">     </div>  

    
<script>

 /*Search the database and get results - WORKING*/
  
 const searchButton = document.querySelector('#search-button')

  searchButton.addEventListener('click', _ => {
    const searchInput = document.getElementById('searchInput');
    const searchValue = searchInput.value;

  fetch('/search', {
    method: 'post',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
    assetTag: searchValue,
    }),
  })
  .then(res => {
    if (res.ok) return res.json();
  })
  .then(response => {
    console.log(response);
    const resultsContainer = document.getElementById('resultsContainer');
    resultsContainer.innerHTML = '';

    if (response.length === 0) {
      resultsContainer.innerHTML = '<p>No results found.</p>';
    } else {
      response.forEach(device => {
        const deviceElement = document.createElement('div');
        const nameElement = document.createElement('h3');
        const organisationElement = document.createElement('p');

        nameElement.textContent = device.name;
        organisationElement.textContent = device.organisation;

        deviceElement.appendChild(nameElement);
        deviceElement.appendChild(organisationElement);

        resultsContainer.appendChild(deviceElement);
      });
    }
  })
  .catch(error => console.error(error));
});

     </script>